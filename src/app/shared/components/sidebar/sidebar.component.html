<div class="sidebar">
  <p class="p-0 m-0 font-success">{{ version }}</p>
  <div *ngIf="chainInfo && chainInfo.chain_id"
       class="d-flex justify-content-center align-items-center w-100 p-2 my-1 bg-danger">
    <div
      (click)="openInfoDialog(rpcInfoDialog)"
      class="subheading__md c-pointer">
      <span class="font-lightest text-break">
        Connect to our custom RPC to use the app.
        Click here to see how.
      </span>
    </div>
  </div>
  <div class="icon-container">
    <div class="d-flex justify-content-center align-items-center">
      <div
        *ngIf="currentAddress"
        [matMenuTriggerFor]="addressMenu"
        class="d-flex align-items-center py-1 px-3 sidebar__address">
        <mat-icon class="address__circle mr-1">
          stop_circle
        </mat-icon>
        <app-address-shortener
          [standalone]="true"
          [showCopy]="false"
          [address]="currentAddress">
        </app-address-shortener>
        <mat-icon>
          keyboard_arrow_down
        </mat-icon>
      </div>
    </div>
    <mat-menu
      class="address__menu"
      xPosition="after"
      #addressMenu="matMenu">
      <div
        *ngIf="slippagePercent$ | async as slippagePercent"
        class="d-flex flex-column align-items-center justify-content-around">
        <div class="label__lg">Set Slippage</div>
        <div class="d-flex align-items-center justify-content-around px-2 py-1 m-1">
          <button
            class="py-1"
            [class.regular]="slippagePercent === 0.1" (click)="setSlippage(0.1)" mat-raised-button>0.1%
          </button>
          <button
            class="py-1"
            [class.regular]="slippagePercent === 0.5" (click)="setSlippage(0.5)" mat-raised-button>0.5%
          </button>
          <button
            class="py-1"
            [class.regular]="slippagePercent === 1" (click)="setSlippage(1)" mat-raised-button>1%
          </button>
        </div>
      </div>
      <div
        [cdkCopyToClipboard]="currentAddress"
        class="address__menu--item">
        <div class="la la-lg la-copy mr-2 font-success"></div>
        <div>Copy your address</div>
      </div>
      <div
        (click)="onSignOut()"
        class="address__menu--item">
        <div class="la la-lg la-sign-out-alt mr-2 font-danger"></div>
        <div>Sign out</div>
      </div>
    </mat-menu>
    <div
      id="dashboardBtn"
      [routerLink]="['/dashboard']"
      [routerLinkActiveOptions]="{exact: true}"
      routerLinkActive="active"
      class="d-flex justify-content-start align-items-center text-center menu-item w-100 py-1 mb-3">
      <div
        class="la la-lg la-pie-chart mr-2 pl-3"></div>
      <div class="sidebar__label">DASHBOARD</div>
    </div>
    <div
      id="reefMenu"
      [routerLink]="['/reef']"
      routerLinkActive="active"
      class="d-flex justify-content-start align-items-center text-center menu-item w-100 py-1 mb-3">
      <div class="la la-lg la-swimming-pool mr-2 pl-3"></div>
      <div class="sidebar__label">REEF</div>
    </div>
    <div
      id="binanceBasket"
      [routerLink]="['/baskets/create-basket']"
      [queryParams]="{ basket: 'binance' }"
      routerLinkActive="active"
      class="d-flex justify-content-start align-items-center text-center menu-item w-100 py-1 mb-2">
      <img
        height="35"
        width="35"
        class="img-fluid mr-2 pl-3"
        src="../../../../assets/images/binance-logo.svg" alt="binance">
      <div class="sidebar__label">B-BASKET</div>
    </div>
    <div class="d-flex justify-content-center align-items-center mb-2 w-100">
      <mat-divider class="sidebar__divider"></mat-divider>
    </div>
    <div
      id="myBaskets"
      [routerLink]="['/baskets']"
      [routerLinkActiveOptions]="{exact: true}"
      routerLinkActive="active"
      class="d-flex justify-content-start align-items-center text-center menu-item w-100 py-1 mb-3">
      <div
        class="la la-lg la-balance-scale mr-2 pl-3"></div>
      <div class="sidebar__label">MY BASKETS</div>
    </div>
    <div
      id="createBasket"
      [routerLink]="['/baskets/create-basket']"
      [routerLinkActiveOptions]="{exact: true}"
      routerLinkActive="active"
      class="d-flex justify-content-start align-items-center text-center menu-item w-100 py-1 mb-3">
      <div
        class="la la-lg la-shopping-basket mr-2 pl-3"></div>
      <div class="sidebar__label">CREATE BASKET</div>
    </div>
    <div
      id="vaults"
      [routerLink]="['/vaults']"
      [routerLinkActiveOptions]="{exact: true}"
      routerLinkActive="active"
      class="d-flex justify-content-start align-items-center text-center menu-item w-100 py-1 mb-3">
      <div
        class="la la-lg la-coins mr-2 pl-3"></div>
      <div class="sidebar__label">VAULTS</div>
    </div>
  </div>
  <div class="mt-auto mb-2 d-flex flex-column align-items-center justify-content-center">
    <a href="https://www.reef.finance/terms_and_conditions.html" class="subheading__md mb-1">Terms & Conditions</a>
    <a href="https://www.reef.finance/privacy.html" class="subheading__md mb-1">Privacy Policy</a>
    <div class="subheading__md">Reef Inc {{ currentYear }}</div>
  </div>
</div>

<!-- TODO: Remove this for prod -->
<ng-template #rpcInfoDialog>
  <div matDialogTitle>How to connect to the REEF RPC</div>
  <mat-dialog-content>
    <div class="subheading__lg">1. In MetaMask, click on Settings, and go to Networks</div>
    <div class="subheading__lg">2. Click on Add Network</div>
    <div class="subheading__lg mb-1">3. Enter this information:</div>
    <div class="subheading__lg mb-1">
      <div>
        Network Name: <span class="font-weight-bold">REEF_RPC</span>
      </div>
      <div>
        New RPC Url: <span class="font-weight-bold">http://46.101.215.206:8600</span>
      </div>
      <div>
        Chain ID: <span class="font-weight-bold">0x539</span>
      </div>
    </div>
    <div class="subheading__lg">
      4. Click Save
    </div>
    <div class="subheading__lg">
      5. Select the REEF_RPC from the network dropdown, and refresh the page.
    </div>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button class="button-small inverse" mat-dialog-close>Got it</button>
  </mat-dialog-actions>
</ng-template>
